n, m = map(int, input().split())

maps=[list(map(int, input().split())) for _ in range(n)]

tetrominos = [[[0, 1], [0, 2], [0, 3]], [[1, 0], [2, 0], [3, 0]],
[[0, 1], [1, 0], [1, 1]], [[1, 0], [2, 0], [2, 1]],
[[1, 0], [2, 0], [2, -1]], [[0, 1], [0, 2], [1, 0]],
[[0, 1], [0, 2], [1, 2]], [[0, 1], [1, 1], [2, 1]],
[[0, 1], [1, 0], [2, 0]], [[0, 1], [0, 2], [-1, 2]],
[[1, 0], [1, 1], [1, 2]], [[1, 0], [1, 1], [2, 1]],
[[1, 0], [1, -1], [2, -1]], [[0, 1], [-1, 1], [-1, 2]],
[[0, 1], [1, 1], [1, 2]], [[0, 1], [0, 2], [1, 1]],
[[1, 0], [1, 1], [2, 0]], [[1, 0], [1, -1], [2, 0]],
[[0, 1], [0, 2], [-1, 1]]]

res=0
for i in range(n):
    for j in range(m):
        for tetromino in tetrominos:
            cur=maps[i][j]
            for t in tetromino:
                try:
                    cur += maps[i+t[0]][j+t[1]]
                except:
                    cur=0
                    break
            res=max(res, cur)

print(res)